# CSE 14X Grading Assistant

CSE 14X Grading Assistant is a program to help optimize the time that you spend grading on Ed.

![Image of assistant running on windows](/windows-image.png)

1. [Installing](#installing)
2. [Running](#running)
3. [Creating a Scoresheet](#creating-a-scoresheet)
    1. [Adding, Editing, and Removing Mistakes](#adding-editing-and-removing-mistakes)
    2. [Mistake Locations](#mistake-locations)
    3. [Generating a Scoresheet](#generating-a-scoresheet)
    4. [Example Generated Scoresheet](#example-generated-scoresheet)
    5. [Customizing the Overall Feedback](#customizing-the-overall-feedback)
4. [Using the Annotation Bank](#using-the-annotation-bank)
    1. [Saving and Opening an Annotation Bank File](#saving-and-opening-an-annotation-bank-file)
    2. [Finding an Annotation](#finding-an-annotation)
    3. [Using an Annotation](#using-an-annotation)
    4. [Example Formatted Annotations](#example-formatted-annotations)
5. [Updating the Annotation Bank](#updating-the-annotation-bank)
    1. [Adding, Editing, and Removing Annotations](#adding-editing-and-removing-annotations)
    2. [Adding and Removing Assignments](#adding-and-removing-assignments)
    3. [Adding, Editing, and Removing Categories](#adding-editing-and-removing-categories)
6. [Support](#support)

## Installing

First, install Python3. Then, install the required packages by running `pip3 install -r requirements.txt`. 

## Running

Run `python3 assistant.py` to start the program.

## Creating a Scoresheet

The assistant is split horizontally into two sections. The top half is the scoresheet and the bottom half is the annotation bank. The scoresheet is student-specific and is used to track mistakes in student submissions and generate a formatted scoresheet detailing those mistakes. Start by entering the student name and your email into the relevant entry boxes.

### Adding, Editing, and Removing Mistakes

To add a mistake to a student submission, click the "+" button below the mistakes table on the top half of the screen. This will open a window allowing you to select the category, the grade, the lines or location, as well as a short description of the mistake. The description is not the same as the annotation, and is only used to give a brief summary of the mistake to the student. Then, hit the "Add Mistake" button to add the mistake to the scoresheet.

To edit a mistake that has been added to the scoresheet, select the mistake you would like to edit and then hit the "..." button below the mistakes table. This will open up the same window as before. Make the edits and hit "Add Mistake" to apply them.

To remove a mistake from the scoresheet, select the mistake you would like to remove and hit the "-" button below the mistakes table.

### Mistake Locations

When adding or editing a mistake you are given the option to enter line numbers for the mistake. Here, you can enter either a single number, a list or range of numbers, a specific location (e.g. "Above the main method"), or nothing at all. The assistant will do its best to keep the generated scoresheet grammatically correct. Examples of all of these cases can be seen in the [example scoresheet](#example-generated-scoresheet).

### Generating a scoresheet

After entering in all of the mistakes, click the "Copy Scoresheet" button to copy a formatted scoresheet to your clipboard that can then be pasted into Ed. If a student has no mistakes in a category, a random positive message will be given instead. By default, categories that are marked as not graded (e.g. the "Notes (not graded)" category) will not appear in the scoresheet if they have no mistakes.

The scoresheet will use the name and email entered by the user to generate an overall message for the student. These require some student-specific editing to make sure that the information is still unique to the student. There are specific messages if a student gets a perfect score (e.g. 4 E's) or if they meet a certain threshold of mistakes (equivalent to 2 N's and an S or an N and a U). Any other score gets a randomly generated overall message.

When you're completely done with grading a student, then you can hit "Ctrl+R" or "Edit > Reset Scoresheet" to reset the scoresheet back to zero.

### Example Generated Scoresheet

Below is an example scoresheet generated by the assistant.

> ## Behavior: **S**
> * **Lines 15-19**: Offensive art
> ## Structure & Design: **N**
> * **Main method**: Main not a summary
> * **Lines 12-13, 17-18**: Redundant method calls
> ## Use of Language Features: **S**
> * **Line 15**: `System.out.println("")`
> ## Documentation & Readability: **S**
> * **Between all methods**: Be sure to include blank lines between all of your methods!
> ## Notes (not graded):
> * It is Java convention to include the main method at the top of the program instead of the bottom
> 
> Good work, Alexa!! I've left some feedback on how to improve your **SOMETHING UNIQUE**, be sure to take a look!! As always, if you have any questions feel free to ask (my email is [my_email@uw.edu](mailto:my_email@uw.edu))!! Keep it up!

### Customizing the Overall Feedback

Open the feedback message editor by clicking "Edit > Feedback Messages". In the window that appears, you can change the message students receive for perfect scores, poor scores, and the randomly generated general scores. Any instances of the string "\<name\>" will be replaced with the student's name, and any instances of the string "\<email\>" will be replaced with your email.

For the general scores, you can choose a general sentence to edit by selecting an option in the dropdown. You can add a new generated sentence to the message by hitting the "Add General Sentence" button and entering in a sentence number for it in the window that appears. You can also remove the selected general sentence by hitting the "Remove General Sentence" button.

After selecting a general sentence, you can edit any sentence options by selecting them in the table to the right of the drop down and editing the text in the text box below the table. You can also add and remove sentence options with the "+" and "-" buttons below the text box. A random sentence option will be chosen for each general sentence when a scoresheet is generated.

These custom messages are saved to the annotation bank files.

## Using the Annotation Bank

The bottom half of the assistant is occupied by the annotation bank.

### Saving and Opening an Annotation Bank File

To save the current annotation bank, including the assignments and grading categories, hit "Ctrl+Shift+S" or "File > Save As" to save as a new file or hit "Ctrl+S" or "File > Save" to save an already opened file. To open an annotation bank, hit "Ctrl+O" or "File > Open" and select the annotation bank file (`.abank`). To import annotations from one bank into another click "File > Import" and select the annotation bank file to import annotations from. Importing an annotation bank does not import any custom overall feedback messages in the bank.

### Finding an Annotation

First, select an assignment to view the annotations of. Click the drop-down box above the annotation bank table in the middle-right of the window to choose an assignment. If an assignment does not appear in the annotation bank, then no annotations for it exist. If the annotation is not assignment-specific, check the "Include General Annotations" checkbox below the assignment dropdown.

Then, scroll through the list of annotations to find the one that you would like. You can also use the search bar above the bank to search for a specific annotation. Typing anything into the search box will automatically filter the bank to include only annotations containg the search term. This search is naive, in that it does not do any autocorrecting or weight the search results. Annotations that have the search text as a substring in either their description, annotation text, or keywords are included in the search.

### Using an Annotation

Once an annotation is selected, its relevant information will appear to the left of the annotation table. This information includes (from left-to-right, top-to-bottom) the annotation's assignment, category, grade, description, annotation text, and grading notes. This information cannot be edited.

If you are pleased with the annotation and would like to copy it, hit the "Copy Annotation" button below the selected annotation view. This will copy a formatted annotation directly to your clipboard that you can then paste into Ed. Note that many annotations have parts that you must edit to make student-specific.

If you are also using the Scoresheet to keep track of student mistakes then you can directly add mistakes from the annotation bank into the current scoresheet by hitting the "Add to Scoresheet" button to the right of the copy button. This will bring up the same "Add Mistake" window as before, with the information about the mistake already filled in. Add any line numbers or locations and hit "Add Mistake" to add it to the scoresheet.

### Example Formatted Annotations

Below are some examples of a formatted annotation copied using the "Copy Annotation" button.

> **(DR: Lines over 100 characters long)** This program has lines that exceed 100 characters! Long lines detract from readability, as someone looking through the code is forced to scroll back and forth to read full lines. See the Long Lines and Wrapping section of the [Java Conventions](https://courses.cs.washington.edu/courses/cse142/21sp/quality.html#javaconventions) section of the Code Quality Guide for strategies on how to wrap long lines!

> **(SD: Main not a summary)** The main method should be a concise summary of the program. You can think of main like the table of contents in a textbook. This main is like a table of contents that just says “all the chapters” instead of listing them out. Instead the contents of **method name** should be in main.

> **(UOLF: `System.out.println("")`)** Notice that `System.out.println("")` and `System.out.println()` produce the exact same output. According to the [Printing](https://courses.cs.washington.edu/courses/cse142/21sp/quality.html#printing) section of the Code Quality Guide, we go by the convention of not including the `""` because it makes the intention less clear.

## Updating the Annotation Bank

The assistant makes it very easy to add, edit, and remove annotations, assignments, and grading categories in the annotation bank.

### Adding, Editing, and Removing Annotations

To add an annotation to the bank, select the "+" button below the annotation bank table. This will bring up a window that will allow you to select the assignment, category, and saved grade for the annotation. You'll also find textboxes for any grading notes, the description (this is what will go onto the scoresheet), the annotation itself (including any markdown), and keywords. Keywords are used only for searching the bank, which is especially useful for including internal language, such as "russian nesting doll", without putting it into the description or annotation shown to students. Once you're done filling out the information, hit the "Add to Bank" button to add it into the annotation bank. Note that this does not automatically save the bank, so be sure to save frequently!

To edit an annotation that is already in the bank, select any annotation in the annotation bank table and hit the "..." button. This will open up the same "Add Annotation" screen as before and allow you to edit the annotation information. Hit "Add to Bank" to save the annotation.

To remove an annotation from the bank, select any annotation in the annotation bank table and hit the "-" button. This will open up a dialog asking you to confirm that you would like to remove the annotation. Hit "Yes" to delete the annotation.

### Adding and Removing Assignments

To add an assignment to the annotation bank, hit the same "+" button used for adding an annotation to the bank. In the upper right of this window, next to the assignment selection dropdown, click the "+" button. This will open a window prompting you to enter in the assignment name you would like to add. Enter the name and hit the "Ok" button to add the assignment to the bank.

To remove an assignment from the annotation bank, hit the "+" button for adding an annotatation to the bank. Here, you can select any assignment from the assignment selection dropdown and hit the "-" button directly to the right of the dropdown. This will open up a pop-up asking you to confirm that you would like to delete the selected assignment. Hit "Yes" to remove the assignment, and any annotations for that assignment, from the bank.

### Adding, Editing, and Removing Categories

To add a category to the annotation bank, go to Edit > Categories. In the form that appears, selecting the "+" button will prompt you to enter in a category name and add the new category to the bank. By default, the category will be graded and an abbreviation will automatically be generated for the new category.

To edit an already existing category, select any category from the list and make the changes that you would like. Making any edits will apply those edits to all mistakes and annotations in the bank. These changes are automatically applied when they're made. You can also reorder the categories by using the "v" and "^" buttons after selecting a category. Note that non-graded categories always come after graded categories and that this cannot be changed.

To remove a category, select any category from the list and hit the "-" button. This will open a pop-up asking you to confirm that you would like to delete the category. Hit "Yes" to delete the category and all of its mistakes and annotations from the bank.

## Support

Please email [thalea@uw.edu](mailto:thalea@uw.edu) if you notice any bugs or issues while grading.
